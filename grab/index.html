<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>

        const { items: itm, prices } = JSON.parse( localStorage.data2 )
        const itemsn = []

        for ( var { time, items } of itm ) {
            const d = {}
            const time_ = new Date( time )

            time_.setMonth( time_.getMonth() - 1 )
            time_.setHours( 9 )

            const m = { time: time_.getTime(), koef: 1, items: d }

            for ( var j = 0; j < items.length; j++ ) {
                if ( items[ j ] ) {
                    d[ j ] = { count: parseFloat( items[ j ] ) }
                }
            }
            itemsn.push( m )
        }

        const data = JSON.parse( localStorage.v0001data )

        data.items  = itemsn
        data.prices = prices

        // v0001data
        localStorage.v0001data = JSON.stringify( data )
        console.log( data );
    </script>
</body>
</html>
